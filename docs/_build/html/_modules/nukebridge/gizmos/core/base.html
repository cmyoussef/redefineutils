<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>nukebridge.gizmos.core.base &mdash; NukeBridge 1.0.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=fd3f3429" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=d55fa986"></script>
        <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            NukeBridge
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules.html">nukebridge</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">NukeBridge</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../../nukebridge.html">nukebridge</a></li>
          <li class="breadcrumb-item"><a href="../../gizmos.html">nukebridge.gizmos</a></li>
      <li class="breadcrumb-item active">nukebridge.gizmos.core.base</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for nukebridge.gizmos.core.base</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module contains the Base class which serves as a foundation for creating gizmos in Nuke.</span>

<span class="sd">The Base class provides a framework for creating and managing gizmos, including UI setup, singleton pattern implementation, and execution of external processes. It also includes methods for saving and loading settings, updating the gizmo&#39;s status, and handling the execution of the gizmo.</span>

<span class="sd">The Base class is designed to be extended by other classes that implement specific gizmo functionality. These subclasses can override methods of the Base class to provide custom behavior.</span>

<span class="sd">This module also includes a main section that creates an instance of the Base class for testing purposes.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">nuke</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="kn">import</span> <span class="nn">nukebridge</span>
<span class="kn">from</span> <span class="nn">nukebridge.config.config_loader</span> <span class="kn">import</span> <span class="n">ConfigLoader</span>
<span class="kn">from</span> <span class="nn">nukebridge.gizmos.core.ui_doc</span> <span class="kn">import</span> <span class="n">UIElementDocs</span>
<span class="kn">from</span> <span class="nn">nukebridge.utils</span> <span class="kn">import</span> <span class="n">common_utils</span>
<span class="kn">from</span> <span class="nn">nukebridge.utils.execute_thread</span> <span class="kn">import</span> <span class="n">ExecuteThread</span>

<span class="kn">from</span> <span class="nn">nukebridge.utils.external_execute</span> <span class="kn">import</span> <span class="n">run_external</span>
<span class="kn">from</span> <span class="nn">nukebridge.utils.icons</span> <span class="kn">import</span> <span class="n">Icons</span>
<span class="kn">from</span> <span class="nn">nukebridge.utils.logger</span> <span class="kn">import</span> <span class="n">logger_level</span><span class="p">,</span> <span class="n">logger</span>

<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logger_level</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">))</span>


<div class="viewcode-block" id="Base">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base">[docs]</a>
<span class="k">class</span> <span class="nc">Base</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for creating gizmos in Nuke. It provides a framework for creating and managing gizmos, including UI setup,</span>
<span class="sd">    singleton pattern implementation, and execution of external processes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_instances</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Keep track of instances here</span>
    <span class="n">models_filters</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">neg_models_filters</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">THREADS_LIST</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">MENU_GRP</span> <span class="o">=</span> <span class="s1">&#39;generate&#39;</span>
    <span class="n">default_knobs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">_initialized</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">frame_padding</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%04d</span><span class="s1">&#39;</span>
    <span class="n">config_loader</span> <span class="o">=</span> <span class="n">ConfigLoader</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">gizmo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensures the singleton pattern for instances of derived classes based on the gizmo identifier. If an instance with the same gizmo already exists, it returns that instance; otherwise, it creates a new one.</span>

<span class="sd">        @param gizmo: Identifier for the gizmo node. If provided, the method attempts to reuse an existing instance for this gizmo.</span>
<span class="sd">        @param name: The name to assign to the gizmo node if it&#39;s being created for the first time.</span>
<span class="sd">        @return: An instance of the class, either newly created or retrieved from the existing instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="n">gizmo</span> <span class="ow">and</span> <span class="n">gizmo</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]:</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">][</span><span class="n">gizmo</span><span class="p">]</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">_initialized</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">_initialized</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">instance</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gizmo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a new instance of the Base class or prepares an existing one. It sets up the gizmo node, default knobs, and class-wide settings. This method avoids re-initialization if the instance is marked as already initialized.</span>

<span class="sd">        @param gizmo: Optional. The name of the gizmo node to be managed by this instance. If not provided, a new node is created.</span>
<span class="sd">        @param name: Optional. The name for the new gizmo node if one is created. Defaults to a class-based naming convention if not provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">gizmo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">toNode</span><span class="p">(</span><span class="n">gizmo</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">gizmo</span><span class="si">}</span><span class="s2"> dose not exists&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_settings_is_loaded</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="s1">&#39;Group&#39;</span><span class="p">,</span> <span class="n">inpanel</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">setName</span><span class="p">(</span><span class="n">name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s1">&#39;NB_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_knobs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knobs</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_settings_is_loaded</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># prevent initializing classes</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialized</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_MODULE_NAME</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">module_name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_cooldown</span> <span class="o">=</span> <span class="mf">0.1</span>  <span class="c1"># Cooldown period in seconds</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">controlNet_dir_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_exec_time</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># store the instance to re-use it later</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">name</span><span class="p">()]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_python_exe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;python_exe&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;python_exe&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_exe</span><span class="p">,</span>
                     <span class="s1">&#39;script_path&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get_script_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">),</span>
                     <span class="s1">&#39;cache_dir&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_node</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_node</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;gizmo_class_type&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo_class_type</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">String_Knob</span><span class="p">(</span><span class="s2">&quot;gizmo_class_type&quot;</span><span class="p">,</span> <span class="s2">&quot;Gizmo class type&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo_class_type</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gizmo_class_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo_class_type</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;gizmo_data_knob&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo_data</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Multiline_Eval_String_Knob</span><span class="p">(</span><span class="s2">&quot;gizmo_data_knob&quot;</span><span class="p">,</span> <span class="s2">&quot;Gizmo Data&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gizmo_data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo_data</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;default_knobs_knob&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_knobs_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">String_Knob</span><span class="p">(</span><span class="s2">&quot;default_knobs_knob&quot;</span><span class="p">,</span> <span class="s2">&quot;default knobs &quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_knobs_knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_knobs</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_knobs_knob</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_knobs_knob</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">default_knobs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;default_knobs_knob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_knobs</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">default_knobs</span><span class="p">)</span> <span class="k">if</span> <span class="n">default_knobs</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="c1"># region settings knobs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir_knob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directory_knob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;output_dir&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_format_knob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;file_pattern_knob&quot;</span><span class="p">)</span>
        <span class="c1"># endregion</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">INVISIBLE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_read_nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_tabs</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">populate_ui</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_settings</span><span class="p">()</span>

        <span class="n">nuke</span><span class="o">.</span><span class="n">addOnDestroy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_destroy</span><span class="p">)</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">.run_instance_method(&quot;knobChanged&quot;)&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;knobChanged&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ext</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span>

    <span class="c1"># region ui</span>
<div class="viewcode-block" id="Base.populate_ui">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.populate_ui">[docs]</a>
    <span class="k">def</span> <span class="nf">populate_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is responsible for setting up the user interface (UI) of the gizmo.</span>
<span class="sd">        It creates the necessary inputs, generate knobs, and settings knobs for the gizmo.</span>
<span class="sd">        It also populates the documentation for the UI elements.</span>

<span class="sd">        The method performs the following steps:</span>
<span class="sd">            1. Begins the gizmo context.</span>
<span class="sd">            2. Calls the create_inputs method to create the necessary inputs for the gizmo.</span>
<span class="sd">            3. Calls the create_generate_knobs method to create the generate knobs for the gizmo.</span>
<span class="sd">            4. Calls the create_settings_knobs method to create the settings knobs for the gizmo.</span>
<span class="sd">            5. Ends the gizmo context.</span>
<span class="sd">            6. Calls the populate_doc method to populate the documentation for the UI elements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;populate_ui()&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_inputs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_generate_knobs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_settings_knobs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">populate_doc</span><span class="p">()</span></div>


<div class="viewcode-block" id="Base.populate_doc">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.populate_doc">[docs]</a>
    <span class="k">def</span> <span class="nf">populate_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Populates the tooltips of the knobs in the gizmo with their corresponding documentation.</span>

<span class="sd">        @param node: The node for which to populate the documentation. If not provided, the gizmo&#39;s node is used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span>
        <span class="n">all_knobs</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">knobs</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">knob_name</span><span class="p">,</span> <span class="n">knob_obj</span> <span class="ow">in</span> <span class="n">all_knobs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">knob_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_knobs</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">knob_obj</span><span class="o">.</span><span class="n">setTooltip</span><span class="p">(</span><span class="n">UIElementDocs</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="n">knob_name</span><span class="p">))</span></div>


<div class="viewcode-block" id="Base.set_status">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.set_status">[docs]</a>
    <span class="k">def</span> <span class="nf">set_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">running</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the status of the gizmo, updating the UI to reflect whether it&#39;s running or idle.</span>

<span class="sd">        @param running: A boolean indicating whether the gizmo is running. If True, the gizmo is marked as running.</span>
<span class="sd">        @param msg: The message to display in the status bar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nuke</span><span class="o">.</span><span class="n">executeInMainThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_status</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">running</span><span class="p">,</span> <span class="n">msg</span><span class="p">,))</span></div>


    <span class="k">def</span> <span class="nf">_set_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">running</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal method to update the status of the gizmo in the main thread.</span>

<span class="sd">        @param running: A boolean indicating whether the gizmo is running. If True, the gizmo is marked as running.</span>
<span class="sd">        @param msg: The message to display in the status bar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">execute_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;execute_btn&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">running</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">execute_btn</span><span class="p">:</span>
                <span class="n">execute_btn</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Running </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s1"> &gt; check your terminal&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">execute_btn</span><span class="p">:</span>
                <span class="n">execute_btn</span><span class="o">.</span><span class="n">clearFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Idle </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_bar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<div class="viewcode-block" id="Base.create_settings_tab">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.create_settings_tab">[docs]</a>
    <span class="k">def</span> <span class="nf">create_settings_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a &#39;Settings&#39; tab in the gizmo&#39;s UI if it doesn&#39;t already exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;settings&#39;</span><span class="p">):</span>
            <span class="n">settings</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Tab_Knob</span><span class="p">(</span><span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="s1">&#39;Settings&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_tabs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Settings&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;settings&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.add_divider">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.add_divider">[docs]</a>
    <span class="k">def</span> <span class="nf">add_divider</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span>

        <span class="c1"># Get the current line number from the call stack</span>
        <span class="n">current_line_number</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_lineno</span>
        <span class="n">base_string</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">current_line_number</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="n">base_string</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="n">total_length</span> <span class="o">=</span> <span class="mi">80</span>

        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39; </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> &#39;</span>
            <span class="n">dash_count</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_length</span> <span class="o">-</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span> <span class="o">//</span> <span class="mi">2</span>
            <span class="n">divider</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="n">dash_count</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="n">dash_count</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">divider</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="n">total_length</span>

        <span class="n">text_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Text_Knob</span><span class="p">(</span><span class="n">base_string</span><span class="p">,</span> <span class="s1">&#39;|&#39;</span><span class="p">)</span>
        <span class="n">text_knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">divider</span> <span class="o">+</span> <span class="s1">&#39; |&#39;</span><span class="p">)</span>
        <span class="n">text_knob</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
        <span class="n">text_knob</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">text_knob</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.create_settings_knobs">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.create_settings_knobs">[docs]</a>
    <span class="k">def</span> <span class="nf">create_settings_knobs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is responsible for creating the settings knobs for the gizmo.</span>

<span class="sd">        The method performs the following steps:</span>
<span class="sd">        1. Calls the create_settings_tab method to create a &#39;Settings&#39; tab in the gizmo&#39;s UI if it doesn&#39;t already exist.</span>
<span class="sd">        2. Adds a &#39;Save Settings&#39; button to the gizmo&#39;s UI, which when clicked, calls the save_settings method.</span>
<span class="sd">        3. Adds a &#39;Load Settings&#39; button to the gizmo&#39;s UI, which when clicked, calls the load_config method.</span>
<span class="sd">        4. Adds a divider to the gizmo&#39;s UI with the label &quot;Advanced CMD&quot;.</span>
<span class="sd">        5. Adds a &#39;pre cmd&#39; and &#39;post cmd&#39; multiline string knobs to the gizmo&#39;s UI for entering pre and post commands.</span>
<span class="sd">        6. Adds a divider to the gizmo&#39;s UI.</span>
<span class="sd">        7. Adds a &#39;logger level&#39; menu to the gizmo&#39;s UI for setting the logger level.</span>
<span class="sd">        8. Adds a &#39;time_out&#39; knob to the gizmo&#39;s UI for setting the timeout duration.</span>
<span class="sd">        9. Adds another divider to the gizmo&#39;s UI with the label &quot;Directory location&quot;.</span>
<span class="sd">        10. Adds an &#39;output format&#39; knob to the gizmo&#39;s UI for setting the output format.</span>
<span class="sd">        11. Adds an &#39;output dir&#39; knob to the gizmo&#39;s UI for setting the output directory.</span>
<span class="sd">        12. Adds a &#39;cache dir&#39; knob to the gizmo&#39;s UI for setting the cache directory.</span>
<span class="sd">        13. Adds a &#39;python exe&#39; knob to the gizmo&#39;s UI for setting the Python executable path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_settings_tab</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;save_settings_btn&#39;</span><span class="p">):</span>
            <span class="n">cn_button</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">PyScript_Knob</span><span class="p">(</span><span class="s1">&#39;save_settings_btn&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Save Settings </span><span class="si">{</span><span class="n">Icons</span><span class="o">.</span><span class="n">save_style_symbol</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">cn_button</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">cn_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;save_settings_btn&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setCommand</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;import </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_class</span><span class="si">}</span><span class="s1">;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">.run_instance_method(&quot;save_settings&quot;)&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;load_settings_btn&#39;</span><span class="p">):</span>
            <span class="n">cn_button</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">PyScript_Knob</span><span class="p">(</span><span class="s1">&#39;load_settings_btn&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Load Settings </span><span class="si">{</span><span class="n">Icons</span><span class="o">.</span><span class="n">load_symbol</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">cn_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;load_settings_btn&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setCommand</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;import </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_class</span><span class="si">}</span><span class="s1">;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">.run_instance_method(&quot;load_config&quot;)&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_divider</span><span class="p">(</span><span class="s2">&quot;Advanced CMD&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;pre_cmd_knob&#39;</span><span class="p">):</span>
            <span class="n">pre_cmd_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Multiline_Eval_String_Knob</span><span class="p">(</span><span class="s1">&#39;pre_cmd_knob&#39;</span><span class="p">,</span> <span class="s1">&#39;pre cmd&#39;</span><span class="p">)</span>
            <span class="n">pre_cmd_knob</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">pre_cmd_knob</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;post_cmd_knob&#39;</span><span class="p">):</span>
            <span class="n">post_cmd_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Multiline_Eval_String_Knob</span><span class="p">(</span><span class="s1">&#39;post_cmd_knob&#39;</span><span class="p">,</span> <span class="s1">&#39;post cmd&#39;</span><span class="p">)</span>
            <span class="n">post_cmd_knob</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">post_cmd_knob</span><span class="p">)</span>

        <span class="n">open_new_terminal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;open_new_terminal&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">open_new_terminal</span><span class="p">:</span>
            <span class="n">open_new_terminal</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Boolean_Knob</span><span class="p">(</span><span class="s1">&#39;open_new_terminal&#39;</span><span class="p">,</span> <span class="s1">&#39;open new terminal&#39;</span><span class="p">)</span>
            <span class="n">open_new_terminal</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="n">open_new_terminal</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">open_new_terminal</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_divider</span><span class="p">()</span>
        <span class="c1"># logger level</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;logger_level_menu&#39;</span><span class="p">):</span>
            <span class="n">logger_level_menu</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Enumeration_Knob</span><span class="p">(</span><span class="s1">&#39;logger_level_menu&#39;</span><span class="p">,</span> <span class="s1">&#39;logger level&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">logger_level</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="n">logger_level_menu</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="n">logger_level_menu</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s1">&#39;info&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">logger_level_menu</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logger_level</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;logger_level_menu&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="s1">&#39;info&#39;</span><span class="p">))</span>

        <span class="c1"># time_out</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;time_out&#39;</span><span class="p">):</span>
            <span class="n">time_out</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Int_Knob</span><span class="p">(</span><span class="s1">&#39;time_out&#39;</span><span class="p">,</span> <span class="s1">&#39;Time out&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="n">time_out</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">time_out</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_divider</span><span class="p">(</span><span class="s1">&#39;Directory location&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_format_knob</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output_format_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">String_Knob</span><span class="p">(</span><span class="s2">&quot;file_pattern_knob&quot;</span><span class="p">,</span> <span class="s2">&quot;Output file pattern&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_format_knob</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output_format_knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s2">&quot;&lt;scriptName&gt;/&lt;nodeName&gt;/%Y%m</span><span class="si">%d</span><span class="s2">/%Y%m</span><span class="si">%d</span><span class="s2">_%H%M%S&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">directory_knob</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">directory_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">File_Knob</span><span class="p">(</span><span class="s2">&quot;output_dir&quot;</span><span class="p">,</span> <span class="s2">&quot;Output Directory&quot;</span><span class="p">)</span>
            <span class="n">output_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;output_dir&#39;</span><span class="p">,</span>
                                                       <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MODULE_NAME</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">directory_knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directory_knob</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir_knob</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">File_Knob</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">,</span> <span class="s2">&quot;Cache dir&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_dir_knob</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir_knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cache_dir</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;python_exe_knob&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">python_exe_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">File_Knob</span><span class="p">(</span><span class="s2">&quot;python_exe_knob&quot;</span><span class="p">,</span> <span class="s2">&quot;Python Path&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">python_exe_knob</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">python_exe_knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_python_exe</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.create_generate_tab">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.create_generate_tab">[docs]</a>
    <span class="k">def</span> <span class="nf">create_generate_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is responsible for creating a &#39;Generate&#39; tab in the gizmo&#39;s UI if it doesn&#39;t already exist.</span>
<span class="sd">        The &#39;Generate&#39; tab is used to house controls related to the generation of output from the gizmo.</span>

<span class="sd">        The method performs the following steps:</span>
<span class="sd">        1. Checks if a &#39;Generate&#39; tab already exists in the gizmo&#39;s UI.</span>
<span class="sd">        2. If not, it creates a new &#39;Generate&#39; tab and adds it to the gizmo&#39;s UI.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;generate&#39;</span><span class="p">):</span>
            <span class="n">generate_tab_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Tab_Knob</span><span class="p">(</span><span class="s2">&quot;generate&quot;</span><span class="p">,</span> <span class="s1">&#39;Generate&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">generate_tab_knob</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_tabs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Generate&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;generate&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.create_terminal_execution_knobs">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.create_terminal_execution_knobs">[docs]</a>
    <span class="k">def</span> <span class="nf">create_terminal_execution_knobs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates knobs for controlling the execution of processes in an external terminal.</span>
<span class="sd">        This includes options to execute, interrupt, and manage execution settings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># region terminal execution</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;use_external_execute&#39;</span><span class="p">):</span>
            <span class="n">use_external_execute</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Boolean_Knob</span><span class="p">(</span><span class="s1">&#39;use_external_execute&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Use Farm </span><span class="si">{</span><span class="n">Icons</span><span class="o">.</span><span class="n">tractor_symbol</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">use_external_execute</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">use_external_execute</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;execute_btn&#39;</span><span class="p">):</span>
            <span class="n">cn_button</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">PyScript_Knob</span><span class="p">(</span><span class="s1">&#39;execute_btn&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Execute </span><span class="si">{</span><span class="n">Icons</span><span class="o">.</span><span class="n">execute_symbol</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">cn_button</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">cn_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;execute_btn&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setCommand</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;import </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_class</span><span class="si">}</span><span class="s1">;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">.run_instance_method(&quot;on_execute&quot;)&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reload_button</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;interrupt_btn&#39;</span><span class="p">):</span>
            <span class="n">interrupt_btn</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">PyScript_Knob</span><span class="p">(</span><span class="s1">&#39;interrupt_btn&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Interrupt </span><span class="si">{</span><span class="n">Icons</span><span class="o">.</span><span class="n">interrupt_symbol</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">interrupt_btn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;interrupt_btn&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setCommand</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;import </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_class</span><span class="si">}</span><span class="s1">;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">.run_instance_method(&quot;on_interrupt&quot;)&#39;</span><span class="p">)</span></div>

        <span class="c1"># endregion</span>

<div class="viewcode-block" id="Base.create_generate_knobs">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.create_generate_knobs">[docs]</a>
    <span class="k">def</span> <span class="nf">create_generate_knobs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets up the UI knobs under the &#39;Generate&#39; tab.</span>
<span class="sd">        This method is responsible for creating and organizing knobs related to the generation process.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_generate_tab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_divider</span><span class="p">()</span>

        <span class="c1"># region frame rang</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;first_frame_knob&#39;</span><span class="p">):</span>
            <span class="n">first_frame_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Int_Knob</span><span class="p">(</span><span class="s1">&#39;first_frame_knob&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">root</span><span class="p">()</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;first_frame&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="n">first_frame_knob</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="n">first_frame_knob</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">)</span>
            <span class="n">first_frame_knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">root</span><span class="p">()</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;first_frame&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">first_frame_knob</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;last_frame_knob&#39;</span><span class="p">):</span>
            <span class="n">end_frame_knob</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Int_Knob</span><span class="p">(</span><span class="s1">&#39;last_frame_knob&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="n">end_frame_knob</span><span class="o">.</span><span class="n">clearFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="n">end_frame_knob</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">)</span>
            <span class="n">end_frame_knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">root</span><span class="p">()</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;last_frame&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">end_frame_knob</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;use_frame_range_knobs&#39;</span><span class="p">):</span>
            <span class="n">use_frame_range_knobs</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Boolean_Knob</span><span class="p">(</span><span class="s1">&#39;use_frame_range_knobs&#39;</span><span class="p">,</span>
                                                      <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">Icons</span><span class="o">.</span><span class="n">video_symbol</span><span class="si">}</span><span class="s1"> Use frame range&#39;</span><span class="p">)</span>
            <span class="n">use_frame_range_knobs</span><span class="o">.</span><span class="n">clearFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">use_frame_range_knobs</span><span class="p">)</span>
        <span class="c1"># endregion</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_divider</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_terminal_execution_knobs</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_status</span><span class="p">(</span><span class="n">running</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.reload_button">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.reload_button">[docs]</a>
    <span class="k">def</span> <span class="nf">reload_button</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates or retrieves a &#39;reload&#39; button knob for the gizmo.</span>
<span class="sd">        This can be used to trigger a refresh or reload of certain data.</span>

<span class="sd">        @return: The reload button knob.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reload_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;reload_btn_knob&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">reload_btn</span><span class="p">:</span>
            <span class="n">reload_btn</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">PyScript_Knob</span><span class="p">(</span><span class="s1">&#39;reload_btn_knob&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Reload </span><span class="si">{</span><span class="n">Icons</span><span class="o">.</span><span class="n">refresh_symbol</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">reload_btn</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">STARTLINE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">reload_btn</span><span class="p">)</span>
        <span class="n">reload_btn</span><span class="o">.</span><span class="n">setCommand</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;import </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_class</span><span class="si">}</span><span class="s1">;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">.run_instance_method(&quot;reload_read_nodes&quot;)&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">reload_btn</span></div>


    <span class="c1"># endregion</span>

    <span class="c1"># region settings</span>
<div class="viewcode-block" id="Base.get_knob_info">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.get_knob_info">[docs]</a>
    <span class="k">def</span> <span class="nf">get_knob_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves information about the knobs of a node or the gizmo and returns it as a dictionary.</span>

<span class="sd">        @param node: Optional. The node from which to gather knob information. If not provided, gathers information from the gizmo.</span>
<span class="sd">        @return: A dictionary with knob names as keys and their values and types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span>
        <span class="n">all_knobs</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">knobs</span><span class="p">()</span>
        <span class="n">info_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">current_tab</span> <span class="o">=</span> <span class="s2">&quot;Settings&quot;</span>

        <span class="k">for</span> <span class="n">knob_name</span><span class="p">,</span> <span class="n">knob_obj</span> <span class="ow">in</span> <span class="n">all_knobs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">knob_obj</span><span class="o">.</span><span class="n">enabled</span><span class="p">():</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">knob_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_knobs</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">knob_obj</span><span class="o">.</span><span class="n">Class</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PyScript_Knob&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">knob_obj</span><span class="o">.</span><span class="n">Class</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Tab_Knob&quot;</span><span class="p">:</span>
                <span class="n">current_tab</span> <span class="o">=</span> <span class="n">knob_obj</span><span class="o">.</span><span class="n">label</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">current_tab</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_tabs</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">current_tab</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">info_dict</span><span class="p">:</span>
                <span class="n">info_dict</span><span class="p">[</span><span class="n">current_tab</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="n">knob_value</span> <span class="o">=</span> <span class="n">knob_obj</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">knob_value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)):</span>
                <span class="n">knob_value_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">knob_value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="n">info_dict</span><span class="p">[</span><span class="n">current_tab</span><span class="p">][</span><span class="n">knob_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">knob_value</span><span class="p">,</span> <span class="s1">&#39;value_type&#39;</span><span class="p">:</span> <span class="n">knob_value_type</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipping </span><span class="si">{</span><span class="n">knob_name</span><span class="si">}</span><span class="s2"> as it&#39;s not JSON-serializable&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">info_dict</span></div>


<div class="viewcode-block" id="Base.set_knob_info">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.set_knob_info">[docs]</a>
    <span class="k">def</span> <span class="nf">set_knob_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info_dict</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the values of knobs based on information provided in a dictionary.</span>

<span class="sd">        @param info_dict: A dictionary containing knob names as keys and their values.</span>
<span class="sd">        @param node: Optional. The node whose knobs will be set. If not provided, sets the knobs on the gizmo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span>
        <span class="k">for</span> <span class="n">tab</span><span class="p">,</span> <span class="n">knobs</span> <span class="ow">in</span> <span class="n">info_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">knob</span><span class="p">,</span> <span class="n">details</span> <span class="ow">in</span> <span class="n">knobs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">knob</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">knobs</span><span class="p">():</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">details</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
                    <span class="n">value_type</span> <span class="o">=</span> <span class="n">details</span><span class="p">[</span><span class="s1">&#39;value_type&#39;</span><span class="p">]</span>

                    <span class="c1"># Casting value based on the type</span>
                    <span class="k">if</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s1">&#39;int&#39;</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s1">&#39;bool&#39;</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="c1"># Add more types if necessary</span>

                    <span class="n">node</span><span class="p">[</span><span class="n">knob</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Knob </span><span class="si">{</span><span class="n">knob</span><span class="si">}</span><span class="s2"> does not exist in the node.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.save_settings">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.save_settings">[docs]</a>
    <span class="k">def</span> <span class="nf">save_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the current settings to a file for persistence. This includes knob values and possibly other UI state information.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_config</span><span class="p">()</span>
        <span class="n">info_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_knob_info</span><span class="p">()</span>
        <span class="n">home_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">home_directory</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_MODULE_NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">info_dict</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File successfully saved at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.load_settings">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.load_settings">[docs]</a>
    <span class="k">def</span> <span class="nf">load_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads settings from a file and applies them to the specified node or the gizmo if no node is specified.</span>

<span class="sd">        @param node: Optional. The node to which the settings will be applied. If not provided, settings are applied to the gizmo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_settings_is_loaded&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings_is_loaded</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_settings_is_loaded</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span>
        <span class="n">home_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">home_directory</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_MODULE_NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Loading settings from </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s1"> on </span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">info_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_knob_info</span><span class="p">(</span><span class="n">info_dict</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No settings saved at: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span></div>


<div class="viewcode-block" id="Base.get_config_settings">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.get_config_settings">[docs]</a>
    <span class="k">def</span> <span class="nf">get_config_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;python_exe&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;python_exe_knob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span>
            <span class="s1">&#39;cache_dir&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span>
            <span class="s1">&#39;output_dir&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;output_dir&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span>
            <span class="s1">&#39;pre_cmd&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;pre_cmd_knob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span>
            <span class="s1">&#39;post_cmd&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;post_cmd_knob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="p">}</span></div>


<div class="viewcode-block" id="Base.save_config">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.save_config">[docs]</a>
    <span class="k">def</span> <span class="nf">save_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the current configuration settings to a file.</span>

<span class="sd">        This method typically writes to a user-specific configuration file, storing values from various knobs or properties that need to be persisted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">home_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">home_directory</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_MODULE_NAME</span><span class="si">}</span><span class="s2">_config&quot;</span><span class="p">)</span>
        <span class="n">info_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">info_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="n">info_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_config_settings</span><span class="p">())</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">info_dict</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">tprint</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File successfully saved at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">tprint</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.load_config">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.load_config">[docs]</a>
    <span class="k">def</span> <span class="nf">load_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads configuration settings from a file and applies them to the gizmo.</span>

<span class="sd">        This method typically reads from a user-specific configuration file and sets various knobs or properties based on the stored values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">home_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">home_directory</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_MODULE_NAME</span><span class="si">}</span><span class="s2">_config&quot;</span><span class="p">)</span>
        <span class="n">fresh_load_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">config</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">fresh_load_config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;fresh_load_config: </span><span class="si">{</span><span class="n">fresh_load_config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;python_exe_knob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span>
            <span class="n">fresh_load_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;python_exe&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;python_exe&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">fresh_load_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;output_dir&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">fresh_load_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;output_dir&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;pre_cmd_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">fresh_load_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pre_cmd&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;post_cmd_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">fresh_load_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;post_cmd&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span></div>


<div class="viewcode-block" id="Base.update_cache_dir">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.update_cache_dir">[docs]</a>
    <span class="k">def</span> <span class="nf">update_cache_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the cache directory path based on the user&#39;s input or a default location.</span>

<span class="sd">        @return: The updated cache directory path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cache_dir_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cache_dir_node</span><span class="p">:</span>
            <span class="n">user_cache_dir</span> <span class="o">=</span> <span class="n">cache_dir_node</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">user_cache_dir</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span> <span class="o">=</span> <span class="n">user_cache_dir</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span></div>


    <span class="c1"># endregion</span>

    <span class="c1"># region properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status_bar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This property retrieves the &#39;status_bar_knob&#39; from the gizmo&#39;s knobs.</span>
<span class="sd">        If the knob does not exist, it creates a new Text_Knob with the name &#39;status_bar_knob&#39; and adds it to the gizmo.</span>

<span class="sd">        Returns:</span>
<span class="sd">            nuke.Text_Knob: The status bar knob of the gizmo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">status_bar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;status_bar_knob&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">status_bar</span><span class="p">:</span>
            <span class="n">status_bar</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">Text_Knob</span><span class="p">(</span><span class="s1">&#39;status_bar_knob&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Status Bar: &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">addKnob</span><span class="p">(</span><span class="n">status_bar</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">status_bar</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that gets the value of the &quot;output_dir&quot; knob from the gizmo.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The value of the &quot;output_dir&quot; knob.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;output_dir&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">python_exe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that gets the value of the &quot;python_exe_knob&quot; from the gizmo.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The value of the &quot;python_exe_knob&quot; knob.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">python_exe_knob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;python_exe_knob&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">python_exe_knob</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_python_exe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;python_exe_knob&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_python_exe</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cache_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that gets the value of the &quot;cache_dir&quot; knob from the gizmo.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The value of the &quot;cache_dir&quot; knob.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cache_dir_knob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cache_dir_knob</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache_dir</span>

    <span class="nd">@cache_dir</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">cache_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache_dir</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setter for the cache_dir property.</span>

<span class="sd">        Args:</span>
<span class="sd">            cache_dir (str): The new value for the cache directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_dir</span> <span class="o">=</span> <span class="n">cache_dir</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that gets the &quot;Input1&quot; node of type &#39;Input&#39; from the gizmo.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Node: The &quot;Input1&quot; node of type &#39;Input&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;Input1&quot;</span><span class="p">,</span> <span class="s1">&#39;Input&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">input_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that gets a dictionary with &#39;input&#39; as key and the input_node as value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary with &#39;input&#39; as key and the input_node as value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_node</span><span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">read_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that gets the &quot;Read1&quot; node of type &#39;Read&#39; from the gizmo.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Node: The &quot;Read1&quot; node of type &#39;Read&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;Read1&quot;</span><span class="p">,</span> <span class="s1">&#39;Read&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that gets the &quot;Output1&quot; node of type &#39;Output&#39; from the gizmo.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Node: The &quot;Output1&quot; node of type &#39;Output&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s2">&quot;Output1&quot;</span><span class="p">,</span> <span class="s1">&#39;Output&#39;</span><span class="p">)</span>

    <span class="c1"># endregion</span>

    <span class="c1"># region slots</span>
<div class="viewcode-block" id="Base.knobChanged">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.knobChanged">[docs]</a>
    <span class="k">def</span> <span class="nf">knobChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">knob</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when a knob value changes. It can implement custom behavior based on the changed knob.</span>

<span class="sd">        @param knob: The knob that has changed.</span>
<span class="sd">        @return: True if the change is handled and does not need further processing, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c1"># Check if the cooldown period has elapsed</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_last_exec_time&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_exec_time</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cooldown</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_exec_time</span> <span class="o">=</span> <span class="n">current_time</span>
        <span class="n">knob</span> <span class="o">=</span> <span class="n">knob</span> <span class="ow">or</span> <span class="n">nuke</span><span class="o">.</span><span class="n">thisKnob</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">knob</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">knob</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;use_frame_range_knobs&#39;</span><span class="p">:</span>
            <span class="n">isEnabled</span> <span class="o">=</span> <span class="n">knob</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">isEnabled</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;last_frame_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">clearFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;first_frame_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">clearFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;last_frame_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;first_frame_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">knob</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;logger_level_menu&#39;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logger_level</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">knob</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="s1">&#39;info&#39;</span><span class="p">))</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Base.on_destroy">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.on_destroy">[docs]</a>
    <span class="k">def</span> <span class="nf">on_destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is called when the gizmo is destroyed.</span>
<span class="sd">        Currently, it does nothing, but it can be overridden in subclasses to perform cleanup tasks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>


    <span class="c1"># endregion</span>

    <span class="c1"># region write and update methods</span>
<div class="viewcode-block" id="Base.create_inputs">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.create_inputs">[docs]</a>
    <span class="k">def</span> <span class="nf">create_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is responsible for creating the necessary inputs for the gizmo.</span>
<span class="sd">        Currently, it returns the input_node property of the gizmo, but it can be overridden in subclasses to create more complex inputs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Node: The input node of the gizmo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_node</span></div>


<div class="viewcode-block" id="Base.reload_read_nodes">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.reload_read_nodes">[docs]</a>
    <span class="k">def</span> <span class="nf">reload_read_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reloads all Read nodes within the gizmo. This is typically used to refresh the content of Read nodes</span>
<span class="sd">        after changes to their source files.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
            <span class="c1"># Check if the current node is a Read node</span>
            <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">Class</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;Read&#39;</span><span class="p">:</span>
                <span class="c1"># Reload the Read node</span>
                <span class="n">n</span><span class="p">[</span><span class="s1">&#39;reload&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">force_evaluate_nodes</span><span class="p">()</span></div>


<div class="viewcode-block" id="Base.get_node">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.get_node">[docs]</a>
    <span class="k">def</span> <span class="nf">get_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodeName</span><span class="p">,</span> <span class="n">nodeType</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves a node by name within the gizmo&#39;s context or creates it if it doesn&#39;t exist and a type is provided.</span>

<span class="sd">        @param nodeName: The name of the node to retrieve or create.</span>
<span class="sd">        @param nodeType: Optional. The type of node to create if the node does not exist. If None, no node will be created if it doesn&#39;t exist.</span>
<span class="sd">        @return: The node if found or created, or None if not found and not created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="n">nodeName</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">node</span>

        <span class="k">if</span> <span class="n">nodeType</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Node type is None and the node doesn&#39;t exists&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>

        <span class="c1"># Clear selection</span>
        <span class="n">nuke</span><span class="o">.</span><span class="n">selectAll</span><span class="p">()</span>
        <span class="n">nuke</span><span class="o">.</span><span class="n">invertSelection</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">nodeType</span> <span class="o">==</span> <span class="s1">&#39;Input&#39;</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Input</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">nodeType</span> <span class="o">==</span> <span class="s1">&#39;Output&#39;</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">createNode</span><span class="p">(</span><span class="n">nodeType</span><span class="p">,</span> <span class="n">inpanel</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">node</span><span class="o">.</span><span class="n">setName</span><span class="p">(</span><span class="n">nodeName</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">node</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">frame_range</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that gets the frame range for the gizmo.</span>

<span class="sd">        If the &#39;use_frame_range_knobs&#39; knob is set to True, it returns the values of the &#39;first_frame_knob&#39; and &#39;last_frame_knob&#39;.</span>
<span class="sd">        If the &#39;use_frame_range_knobs&#39; knob is set to False, it returns the current frame for both the start and end frame.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: A tuple containing the start and end frame as integers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;use_frame_range_knobs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
            <span class="n">start_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;first_frame_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="n">end_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;last_frame_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">start_frame</span> <span class="o">=</span> <span class="n">end_frame</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">frame</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_frame</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_frame</span><span class="p">)</span>

<div class="viewcode-block" id="Base.update_single_read_node">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.update_single_read_node">[docs]</a>
    <span class="k">def</span> <span class="nf">update_single_read_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates a single Read node with a new file path and reloads it. It also adjusts the frame range and on_error behavior.</span>

<span class="sd">        @param node: The Read node to update.</span>
<span class="sd">        @param file_path: The new file path to assign to the node.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;reload&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>

        <span class="n">first</span><span class="p">,</span> <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_range</span>
        <span class="n">node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;last&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">last</span><span class="p">)</span>

        <span class="c1"># Set the &#39;on_error&#39; parameter to &#39;nearest frame&#39;</span>
        <span class="n">node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;on_error&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">force_evaluate_nodes</span><span class="p">()</span></div>


<div class="viewcode-block" id="Base.check_files">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.check_files">[docs]</a>
    <span class="k">def</span> <span class="nf">check_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span> <span class="n">sleep</span><span class="o">=</span><span class="mf">.1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Monitors a list of files until they are found or a timeout is reached. Used to wait for files to be generated.</span>

<span class="sd">        @param files: A list of file paths to monitor.</span>
<span class="sd">        @param timeout: How long to wait before giving up, in seconds.</span>
<span class="sd">        @param sleep: How long to wait between checks, in seconds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c1"># Convert list to set for efficient removal.</span>
        <span class="n">remaining_files</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">remaining_files</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">remaining_files</span><span class="p">):</span>  <span class="c1"># Create a copy of the set for iteration.</span>
                <span class="n">file_path_to_check</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_padding</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s1">04d</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">common_utils</span><span class="o">.</span><span class="n">check_file_complete</span><span class="p">(</span><span class="n">file_path_to_check</span><span class="p">):</span>
                    <span class="c1"># time.sleep(sleep)</span>
                    <span class="n">nuke</span><span class="o">.</span><span class="n">executeInMainThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_single_read_node</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,))</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;updating </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">remaining_files</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">file_path</span><span class="p">,</span> <span class="n">node</span><span class="p">))</span>  <span class="c1"># Remove from the set.</span>
            <span class="c1"># Check if the timeout has been reached</span>
            <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&gt;</span> <span class="n">timeout</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Timeout reached, It will stop look for the image to be rendered&quot;</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.update_output">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.update_output">[docs]</a>
    <span class="k">def</span> <span class="nf">update_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_batch</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the output nodes based on the given batch of output files.</span>
<span class="sd">        Creates new Read nodes for each file in the output batch and sets their properties accordingly.</span>

<span class="sd">        @param output_batch: A list of output file paths or a single output file path.</span>
<span class="sd">        Each path is used to create or update a Read node within the gizmo.</span>
<span class="sd">        @return: A list of updated or created Read nodes corresponding to the output files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_status</span><span class="p">(</span><span class="n">running</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_batch</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">output_batch</span> <span class="o">=</span> <span class="p">[</span><span class="n">output_batch</span><span class="p">]</span>

        <span class="n">output_nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">num</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">b</span><span class="p">,</span> <span class="n">output_files</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">output_batch</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">output_files</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">output_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">output_files</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">output_file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">output_files</span><span class="p">):</span>
                <span class="n">fileNode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Read</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;Read&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_single_read_node</span><span class="p">(</span><span class="n">fileNode</span><span class="p">,</span> <span class="n">output_file</span><span class="p">)</span>
                <span class="n">fileNode</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;reload&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
                <span class="n">output_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fileNode</span><span class="p">)</span>
                <span class="n">num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">output_nodes</span></div>


<div class="viewcode-block" id="Base.add_padding">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.add_padding">[docs]</a>
    <span class="k">def</span> <span class="nf">add_padding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds padding to the file name in a given path according to the class&#39;s frame padding settings. Useful for generating file names that include frame numbers.</span>

<span class="sd">        @param path: The initial file path, potentially without frame number padding.</span>
<span class="sd">        @param ext: Optional. The file extension to use if changing the extension of the path. Uses the path&#39;s current extension if not provided.</span>
<span class="sd">        @return: The modified path with frame number padding added.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_path</span><span class="p">,</span> <span class="n">current_ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="p">(</span><span class="n">ext</span> <span class="ow">or</span> <span class="n">current_ext</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ext</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ext</span>
        <span class="n">base_path</span> <span class="o">=</span> <span class="n">base_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_path</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="sa">f</span><span class="s1">&#39;.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_padding</span><span class="si">}</span><span class="s1">.&#39;</span> <span class="ow">in</span> <span class="n">path</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base_path</span><span class="si">}</span><span class="s2">.%04d.</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">path</span></div>


<div class="viewcode-block" id="Base.write_input">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.write_input">[docs]</a>
    <span class="k">def</span> <span class="nf">write_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outputPath</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frame_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hard_error</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Writes the input of a specified node to a file.</span>
<span class="sd">        It supports writing a temporary single-pixel image for quick checks or a full image based on the node&#39;s output.</span>

<span class="sd">        @param outputPath: The path where the output file will be saved. It may include a pattern for frame numbering.</span>
<span class="sd">        @param node: Optional. The node whose output will be written. Defaults to the input node of the gizmo.</span>
<span class="sd">        @param ext: Optional. The file extension/type to use for the output file. Defaults to self.ext.</span>
<span class="sd">        @param frame_range: Optional. A tuple specifying the start and end frames to write. Uses the gizmo&#39;s frame range if not provided.</span>
<span class="sd">        @param temp: Optional. If True, writes a temporary 1x1 pixel image instead of the full output. Defaults to False.</span>
<span class="sd">        @param hard_error: Optional. If True, raises an error if the node is not connected. Defaults to False.</span>
<span class="sd">        @return: The path to the written file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_node</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_connected</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="ow">and</span> <span class="n">hard_error</span><span class="p">:</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="si">}</span><span class="s2"> Is not connected, nothing to write.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="si">}</span><span class="s2"> Is not connected, nothing to write.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">ext</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ext</span>
        <span class="c1"># Use a Write node to save the input image</span>
        <span class="n">write_node</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Write</span><span class="p">()</span>
        <span class="n">write_node</span><span class="p">[</span><span class="s1">&#39;create_directories&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">nodes_to_delete</span> <span class="o">=</span> <span class="p">[</span><span class="n">write_node</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">temp</span><span class="p">:</span>
            <span class="n">base_path</span><span class="p">,</span> <span class="n">current_ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">outputPath</span><span class="p">)</span>
            <span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span>
            <span class="n">base_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span>
            <span class="n">outputPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">base_name</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">reformat_node</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">Reformat</span><span class="p">()</span>
            <span class="n">nodes_to_delete</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reformat_node</span><span class="p">)</span>
            <span class="n">reformat_node</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
            <span class="n">reformat_node</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s1">&#39;to box&#39;</span><span class="p">)</span>
            <span class="n">reformat_node</span><span class="p">[</span><span class="s1">&#39;box_fixed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">reformat_node</span><span class="p">[</span><span class="s1">&#39;box_width&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">reformat_node</span><span class="p">[</span><span class="s1">&#39;box_height&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">write_node</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">reformat_node</span><span class="p">)</span>

        <span class="n">outputPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_padding</span><span class="p">(</span><span class="n">outputPath</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span>
        <span class="n">write_node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">outputPath</span><span class="p">)</span>
        <span class="n">write_node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;channels&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s1">&#39;rgba&#39;</span><span class="p">)</span>
        <span class="n">write_node</span><span class="o">.</span><span class="n">setInput</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

        <span class="c1"># Set the file_type and datatype</span>
        <span class="n">write_node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;file_type&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
        <span class="c1"># Execute the Write node</span>
        <span class="n">start_frame</span><span class="p">,</span> <span class="n">end_frame</span> <span class="o">=</span> <span class="n">frame_range</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_range</span>

        <span class="c1"># write_node.knob(&#39;datatype&#39;).setValue(&#39;8 bit&#39;)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Output Path</span><span class="si">{</span><span class="n">outputPath</span><span class="si">}</span><span class="s1">, frames </span><span class="si">{</span><span class="n">start_frame</span><span class="p">,</span><span class="w"> </span><span class="n">end_frame</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">nuke</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">write_node</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span> <span class="n">start_frame</span><span class="p">,</span> <span class="n">end_frame</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nodes_to_delete</span><span class="p">:</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>

        <span class="c1"># outputPath = outputPath.replace(f&#39;.{self.frame_padding}.&#39;, f&quot;.{nuke.frame():04d}.&quot;)</span>
        <span class="k">return</span> <span class="n">outputPath</span></div>


<div class="viewcode-block" id="Base.write_inputs">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.write_inputs">[docs]</a>
    <span class="k">def</span> <span class="nf">write_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_range</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Writes the inputs of the gizmo to files. The inputs are determined by the input_dict property of the gizmo.</span>
<span class="sd">        Each input is written to a file using the write_input method, and the file path is stored in the args dictionary</span>
<span class="sd">        with the corresponding key from input_dict.</span>
<span class="sd">        Args:</span>
<span class="sd">            frame_range (tuple): Optional. A tuple specifying the start and end frames to write.</span>
<span class="sd">            Uses the gizmo&#39;s frame range if not provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">input_image_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">input_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_input</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input_img_path</span><span class="p">(</span><span class="n">node</span><span class="p">),</span> <span class="n">node</span><span class="p">,</span> <span class="n">hard_error</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">frame_range</span><span class="o">=</span><span class="n">frame_range</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Writing input_</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">input_</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_</span>
            <span class="n">input_image_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_</span>
        <span class="k">return</span> <span class="n">input_image_dict</span></div>


<div class="viewcode-block" id="Base.force_evaluate_nodes">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.force_evaluate_nodes">[docs]</a>
    <span class="k">def</span> <span class="nf">force_evaluate_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Forces the evaluation of all nodes in the gizmo. This is done by changing the label of the &#39;Output1&#39; node,</span>
<span class="sd">        which triggers an update of the node graph in Nuke.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s1">&#39;Output1&#39;</span><span class="p">,</span> <span class="s1">&#39;Output&#39;</span><span class="p">)</span>

        <span class="c1"># for n in self.gizmo.nodes():</span>
        <span class="n">knob</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">)</span>
        <span class="n">current_label</span> <span class="o">=</span> <span class="n">knob</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="n">knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">current_label</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">knob</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">current_label</span><span class="p">)</span></div>


    <span class="c1"># endregion</span>

<div class="viewcode-block" id="Base.get_output_path">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.get_output_path">[docs]</a>
    <span class="k">def</span> <span class="nf">get_output_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;png&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the output path for the gizmo, adding padding to the file name according to the class&#39;s frame padding settings.</span>

<span class="sd">        Args:</span>
<span class="sd">            ext (str): The file extension/type to use for the output file. Defaults to &#39;png&#39;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The modified path with frame number padding added.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_padding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">python_path_to_append</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that returns a list of paths to be appended to the PYTHONPATH.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nukebridge_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">nukebridge</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)))</span>
        <span class="n">nukebridge_dir</span> <span class="o">=</span> <span class="n">nukebridge_dir</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>  <span class="c1"># Replace backslashes with forward slashes for compatibility</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">nukebridge_dir</span><span class="p">]</span>

<div class="viewcode-block" id="Base.export_env">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.export_env">[docs]</a>
    <span class="k">def</span> <span class="nf">export_env</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports the environment for the external process. This includes setting up environment variables for the cache directory</span>
<span class="sd">        and adding the nukebridge module directory to the PYTHONPATH.</span>

<span class="sd">        The environment variables are stored in the args dictionary under the &#39;export_env&#39; key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Define a list of environment keys that will be used to set up the environment for the external process</span>
        <span class="n">env_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;HF_HOME&#39;</span><span class="p">,</span> <span class="s1">&#39;PIP_CACHE_DIR&#39;</span><span class="p">,</span> <span class="s1">&#39;TRANSFORMERS_CACHE&#39;</span><span class="p">]</span>

        <span class="c1"># Create a dictionary where each key from env_keys is associated with the cache directory path</span>
        <span class="c1"># This will be used to set up the environment variables for the external process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;export_env&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">k</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">env_keys</span><span class="p">])</span>

        <span class="c1"># Get the directory path of the nukebridge module</span>
        <span class="n">PYTHONPATH_</span> <span class="o">=</span> <span class="s1">&#39;%PYTHONPATH%;&#39;</span> <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span> <span class="k">else</span> <span class="s1">&#39;$PYTHONPATH:&#39;</span>
        <span class="n">joined_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="s2">&quot;;&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;Windows&quot;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="si">}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">python_path_to_append</span><span class="p">)</span>
        <span class="c1"># Add the nukebridge directory path to the PYTHONPATH environment variable</span>
        <span class="c1"># This ensures that the external process has access to the nukebridge module</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;export_env&#39;</span><span class="p">][</span><span class="s1">&#39;PYTHONPATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">PYTHONPATH_</span><span class="si">}</span><span class="s1">&quot;</span><span class="si">{</span><span class="n">joined_path</span><span class="si">}</span><span class="s1">&quot;&#39;</span></div>


    <span class="c1"># region main execution</span>
<div class="viewcode-block" id="Base.update_args">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.update_args">[docs]</a>
    <span class="k">def</span> <span class="nf">update_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the arguments dictionary that will be passed to external processes. This includes setting up the paths for input and output files and including additional data as necessary.</span>

<span class="sd">        This method should be overridden in subclasses to provide specific argument setups required for their functionality.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_env</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;logger_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">logger_level</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;logger_level_menu&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;python_exe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">python_exe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;cache_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_dir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;frame_range&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_range</span><span class="si">}</span><span class="s1">&#39;</span>

        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;output.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">frame_padding</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">write_inputs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span></div>

        <span class="c1"># self.args[&#39;data&#39;] = {&#39;input_01&#39;: input_01, &#39;frames&#39;: self.frame_range, &#39;output&#39;: self.output_path,</span>
        <span class="c1">#                      &#39;test_int&#39;: 25456, &#39;test_float&#39;: 453.3543, &#39;test_list&#39;: [10, &#39;test&#39;, 15.44],</span>
        <span class="c1">#                      &#39;test_dict&#39;: {&#39;test_int&#39;: 25456, &#39;test_float&#39;: 453.3543, &#39;test_list&#39;: [10, &#39;test&#39;, 15.44]}}</span>

<div class="viewcode-block" id="Base.on_execute">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.on_execute">[docs]</a>
    <span class="k">def</span> <span class="nf">on_execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the execution logic for the gizmo. This method prepares the arguments, starts the execution thread if necessary, and updates the UI to reflect the current execution state.</span>

<span class="sd">        It can execute a predefined command directly or delegate the execution to an external tool or service, depending on the gizmo&#39;s configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_args</span><span class="p">()</span>

        <span class="n">pre_cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;pre_cmd_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="ow">or</span> <span class="kc">None</span>
        <span class="n">post_cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;post_cmd_knob&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="ow">or</span> <span class="kc">None</span>
        <span class="n">open_new_terminal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;open_new_terminal&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="ow">or</span> <span class="kc">None</span>
        <span class="n">thread</span> <span class="o">=</span> <span class="n">ExecuteThread</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_callback</span><span class="p">,</span> <span class="n">pre_cmd</span><span class="p">,</span> <span class="n">post_cmd</span><span class="p">,</span> <span class="n">open_new_terminal</span><span class="o">=</span><span class="n">open_new_terminal</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_output</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">,</span> <span class="p">[]))</span>
        <span class="c1"># print the command to that run the stable diffusion.</span>
        <span class="n">nuke</span><span class="o">.</span><span class="n">tprint</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;-&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">}</span><span class="se">\n</span><span class="s2">Execute </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="si">{</span><span class="n">thread</span><span class="o">.</span><span class="n">cmd</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="s1">&#39;-&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s1">&#39;use_external_execute&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">tprint</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;-&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">}</span><span class="se">\n</span><span class="s2">External Execute&quot;</span><span class="p">)</span>
            <span class="n">jobName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
            <span class="n">cardName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">run_external</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">cmd</span><span class="p">,</span> <span class="n">jobName</span><span class="o">=</span><span class="n">jobName</span><span class="p">,</span> <span class="n">cardName</span><span class="o">=</span><span class="n">cardName</span><span class="p">)</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">tprint</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">THREADS_LIST</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_status</span><span class="p">(</span><span class="n">running</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.execute_callback">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.execute_callback">[docs]</a>
    <span class="k">def</span> <span class="nf">execute_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A callback method that is called upon the completion of the execution process. It typically updates the gizmo&#39;s UI to indicate that the process has finished and performs any necessary cleanup.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_status</span><span class="p">(</span><span class="n">running</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reload_read_nodes</span><span class="p">()</span></div>


<div class="viewcode-block" id="Base.run_instance_method">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.run_instance_method">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">run_instance_method</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A class method that executes a method of an existing instance based on a node name. It is typically used as a callback from UI elements to execute instance methods.</span>

<span class="sd">        @param args: The first argument should be the method name to call. Any subsequent arguments are passed to the method.</span>
<span class="sd">        @param kwargs: Keyword arguments to pass to the method.</span>
<span class="sd">        @return: The result of the method call, if any.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node_name</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">thisNode</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="n">node_name</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]:</span>
            <span class="n">inst</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">][</span><span class="n">node_name</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">inst</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">nuke</span><span class="o">.</span><span class="n">thisNode</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># return</span>
        <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">inst</span><span class="p">,</span> <span class="n">func_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">func</span> <span class="ow">and</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="c1"># logger.debug(f&quot;running &#39;{cls.__name__}&#39; &#39;{func_name}, Node Name: {nuke.thisNode().name()}&#39;&quot;)</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; object has no method &#39;</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.on_interrupt">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.on_interrupt">[docs]</a>
    <span class="k">def</span> <span class="nf">on_interrupt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles interrupting or terminating the ongoing execution process.</span>
<span class="sd">        This is typically bound to a UI element allowing users to stop a process before completion.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">THREADS_LIST</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
                <span class="n">p</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">THREADS_LIST</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">p</span><span class="p">:</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">tprint</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Terminating running processes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_status</span><span class="p">(</span><span class="n">running</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


    <span class="c1"># endregion</span>

    <span class="c1"># region paths</span>
<div class="viewcode-block" id="Base.format_name">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.format_name">[docs]</a>
    <span class="k">def</span> <span class="nf">format_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Formats a path based on user input, replacing placeholders with dynamic values and handling datetime formatting.</span>

<span class="sd">        @param user_input: The format string provided by the user, which may include datetime formats, placeholders, and intended directories.</span>
<span class="sd">        @return: A path string with placeholders replaced by their corresponding dynamic values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Split user input by &#39;/&#39; to handle directory structure</span>

        <span class="n">parts</span> <span class="o">=</span> <span class="n">user_input</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="n">formatted_parts</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
            <span class="c1"># Replace &lt;nodeName&gt; placeholder</span>
            <span class="k">if</span> <span class="s2">&quot;&lt;nodeName&gt;&quot;</span> <span class="ow">in</span> <span class="n">part</span><span class="p">:</span>
                <span class="n">node_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>  <span class="c1"># Assuming self.gizmo is your node object</span>
                <span class="n">part</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;nodeName&gt;&quot;</span><span class="p">,</span> <span class="n">node_name</span><span class="p">)</span>

            <span class="c1"># Replace &lt;scriptName&gt; placeholder</span>
            <span class="k">if</span> <span class="s2">&quot;&lt;scriptName&gt;&quot;</span> <span class="ow">in</span> <span class="n">part</span><span class="p">:</span>
                <span class="n">script_name</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">root</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
                <span class="n">script_name</span> <span class="o">=</span> <span class="s2">&quot;untitled&quot;</span> <span class="k">if</span> <span class="n">script_name</span> <span class="o">==</span> <span class="s1">&#39;Root&#39;</span> <span class="k">else</span> <span class="n">script_name</span>
                <span class="c1"># Only get the file name without path</span>
                <span class="n">script_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">script_name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">part</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;scriptName&gt;&quot;</span><span class="p">,</span> <span class="n">script_name</span><span class="p">)</span>

            <span class="c1"># Attempt datetime formatting on each part</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">part</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="c1"># If the part doesn&#39;t contain datetime formatting, leave it as is</span>
                <span class="k">pass</span>

            <span class="n">formatted_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>

        <span class="c1"># Use os.path.join to correctly handle directory separators</span>
        <span class="n">formatted_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">formatted_parts</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">formatted_path</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property that gets the output path for the gizmo. The output path is determined by formatting the value of the</span>
<span class="sd">        &#39;output_format_knob&#39; with the &#39;format_name&#39; method. This allows for dynamic paths based on user configurations</span>
<span class="sd">        and the current state.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The output path for the gizmo.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_format_knob</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_export_dir</span><span class="p">(),</span> <span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Base.get_export_dir">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.get_export_dir">[docs]</a>
    <span class="k">def</span> <span class="nf">get_export_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the directory path where export files should be stored.</span>
<span class="sd">        This path is usually based on user configurations and may involve some formatting based on the current state.</span>

<span class="sd">        @return: The path to the directory where export files should be stored.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="s2">&quot;output_dir&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">output_dir</span>  <span class="c1"># os.path.join(output_dir, self.gizmo.name())</span></div>


<div class="viewcode-block" id="Base.get_input_img_path">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.get_input_img_path">[docs]</a>
    <span class="k">def</span> <span class="nf">get_input_img_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_node</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs the file path for an input image based on the provided input node and the current configuration.</span>

<span class="sd">        @param input_node: Optional. The node for which to construct the input image path.</span>
<span class="sd">                            If not provided, uses the class&#39;s input node.</span>
<span class="sd">        @return: The constructed file path for the input image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dir_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">),</span> <span class="s1">&#39;sources&#39;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dir_</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">img_name</span> <span class="o">=</span> <span class="n">input_node</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="k">if</span> <span class="n">input_node</span> <span class="k">else</span> <span class="s1">&#39;init_img&#39;</span>
        <span class="n">img_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir_</span><span class="p">,</span> <span class="n">img_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">img_path</span></div>


    <span class="c1"># endregion</span>

    <span class="c1"># region utils</span>
<div class="viewcode-block" id="Base.is_connected">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.is_connected">[docs]</a>
    <span class="k">def</span> <span class="nf">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks whether the specified node, or the class&#39;s input node if none is specified, is connected to any input.</span>

<span class="sd">        @param node: Optional. The node to check for connectivity. If not provided, checks the class&#39;s default input node.</span>
<span class="sd">        @return: True if the node is connected, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Find which index the internal input is mapped to in the group node</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_node</span>
        <span class="n">inp_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">inp_index</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Base.show_hide_knobs">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.show_hide_knobs">[docs]</a>
    <span class="k">def</span> <span class="nf">show_hide_knobs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">knob_list</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shows or hides the specified list of knobs on the gizmo&#39;s UI.</span>

<span class="sd">        @param knob_list: A list of knob names to be shown or hidden. Can also be a single knob name as a string.</span>
<span class="sd">        @param show: Boolean indicating whether to show (True) or hide (False) the specified knobs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">knob_list</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">knob_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">knob_list</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">knob</span> <span class="ow">in</span> <span class="n">knob_list</span><span class="p">:</span>
            <span class="n">knobC</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">knob</span><span class="p">(</span><span class="n">knob</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">knobC</span><span class="p">:</span>
                <span class="n">knobC</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">show</span><span class="p">)</span></div>


<div class="viewcode-block" id="Base.find_node_in_group">
<a class="viewcode-back" href="../../../../nukebridge.gizmos.core.html#nukebridge.gizmos.core.base.Base.find_node_in_group">[docs]</a>
    <span class="k">def</span> <span class="nf">find_node_in_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for a node with the specified name within the gizmo&#39;s node group.</span>

<span class="sd">        @param node_name: The name of the node to find.</span>
<span class="sd">        @return: The found node if it exists within the group, None otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gizmo</span><span class="o">.</span><span class="n">nodes</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="n">node_name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">node</span>
        <span class="k">return</span> <span class="kc">None</span></div>
</div>


    <span class="c1"># endregion</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">Base</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;TestBaseNode&#39;</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Mahmoud Youssef.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>